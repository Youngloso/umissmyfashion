<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ - U Miss My Fashion</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .cart-section { padding: 40px 5%; max-width: 1000px; margin: auto; }
        .cart-header { border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 20px; }
        .cart-item { display: flex; align-items: center; border-bottom: 1px solid #eee; padding: 15px 0; gap: 20px; }
        .cart-item img { width: 80px; height: 100px; object-fit: cover; border-radius: 5px; }
        .cart-info { flex: 1; }
        .cart-info h3 { margin: 0 0 5px 0; font-size: 1.1rem; }
        .cart-info p { color: #666; font-size: 0.9rem; margin: 2px 0; }
        .price-total { font-weight: bold; font-size: 1.1rem; }
        .remove-btn { color: #ff4d4d; cursor: pointer; border: 1px solid #ff4d4d; background: none; padding: 5px 10px; border-radius: 3px; font-size: 0.8rem; }
        .remove-btn:hover { background: #ff4d4d; color: #fff; }
        .summary-box { margin-top: 30px; background: #f9f9f9; padding: 20px; text-align: right; border-radius: 10px; }
        .summary-box h2 { margin-bottom: 20px; }
        .checkout-btn { background: #000; color: #fff; padding: 15px 40px; text-decoration: none; display: inline-block; font-weight: bold; border-radius: 5px; transition: 0.3s; }
        .checkout-btn:hover { background: #333; transform: translateY(-3px); }
        .empty-cart { text-align: center; padding: 50px; }
    </style>
</head>
<body>
    <header>
        <h1>UMissMyFashion</h1>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="products.html">All Product</a></li>
                <li><a href="cart.html"><b>Cart</b></a></li>
            </ul>
        </nav>
    </header>

    <section class="cart-section">
        <div class="cart-header"><h2>Shopping Cart</h2></div>
        <div id="cart-display">
            </div>

        <div id="cart-summary" class="summary-box" style="display: none;">
            <p>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô</p>
            <h2 id="grand-total">‡∏ø0</h2>
            <a href="#" onclick="sendToLine(event)" class="checkout-btn">‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ú‡πà‡∏≤‡∏ô LINE (‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå)</a>
        </div>
    </section>

    <script>
        function displayCart() {
            const cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
            const display = document.getElementById('cart-display');
            const summary = document.getElementById('cart-summary');
            let total = 0;

            if (cart.length === 0) {
                display.innerHTML = '<div class="empty-cart"><h3>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤</h3><br><a href="products.html">‡πÑ‡∏õ‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢!</a></div>';
                summary.style.display = 'none';
                return;
            }

            summary.style.display = 'block';
            display.innerHTML = '';

            cart.forEach((item, index) => {
                const priceNum = parseInt(item.price.replace(/[^0-9]/g, ""));
                const itemTotal = priceNum * item.quantity;
                total += itemTotal;

                display.innerHTML += `
                    <div class="cart-item">
                        <img src="${item.img}" alt="${item.name}">
                        <div class="cart-info">
                            <h3>${item.name}</h3>
                            <p>Size: ${item.size}</p>
                            <p>‡∏£‡∏≤‡∏Ñ‡∏≤: ${item.price} x ${item.quantity}</p>
                            <button class="remove-btn" onclick="removeItem(${index})">‡∏•‡∏ö‡∏≠‡∏≠‡∏Å</button>
                        </div>
                        <div class="price-total">‡∏ø${itemTotal.toLocaleString()}</div>
                    </div>
                `;
            });

            document.getElementById('grand-total').textContent = `‡∏ø${total.toLocaleString()}`;
        }

        function removeItem(index) {
            let cart = JSON.parse(localStorage.getItem('shoppingCart'));
            cart.splice(index, 1);
            localStorage.setItem('shoppingCart', JSON.stringify(cart));
            displayCart();
        }

        function sendToLine(e) {
            e.preventDefault();
            const cart = JSON.parse(localStorage.getItem('shoppingCart'));
            let text = "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö:\n\n";
            
            cart.forEach((item, i) => {
                text += `${i+1}. ${item.name}\n   Size: ${item.size}, ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${item.quantity}\n`;
            });
            
            text += `\nüí∞ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${document.getElementById('grand-total').textContent}`;
            
            const lineUrl = `https://line.me/ti/p/@umissmyfashion?text=${encodeURIComponent(text)}`;
            window.open(lineUrl, '_blank');
        }

        document.addEventListener('DOMContentLoaded', displayCart);
    </script>
</body>
</html>
